<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 3</title>
</head>
<body>
    <div id="root">
        <div class="task-block">
            <h2>Simple factorial</h2>
            <div id="root-1"></div>
        </div>
        <div class="task-block">
            <h2>Tick factorial</h2>
            <div id="root-2"></div>
        </div>
        <div class="task-block">
            <h2>Immediate factorial</h2>
            <div id="root-3"></div>
        </div>
    </div>
    <script>
        const factRequest = async () => {
            const date = Date.now();

            for (let i = 0; i <= 20; i++) {
                let result = await fetch(`http://localhost:3000/fact?k=${i}`)
                let json = await result.json();
                document.querySelector('#root-1').innerHTML += `${i}.Result: ${Date.now() - date}-${i}/${json.fact}<br/>`;
            }
        }

        const tickRequest = async () => {
            const date = Date.now();

            for (let i = 0; i <= 20; i++) {
                let result = await fetch(`http://localhost:3000/tick-fact?k=${i}`)
                let json = await result.json();
                document.querySelector('#root-2').innerHTML += `${i}.Result: ${Date.now() - date}-${i}/${json.fact}<br/>`;
            }
        }

        const immediateRequest = async () => {
            const date = Date.now();

            for (let i = 0; i <= 20; i++) {
                let result = await fetch(`http://localhost:3000/immediate-fact?k=${i}`);
                let json = await result.json();
                document.querySelector('#root-3').innerHTML += `${i}.Result: ${Date.now() - date}-${i}/${json.fact}<br/>`;
            }
        }

        setTimeout(() => {
            factRequest();
        }, 0);

        setTimeout(() => {
            tickRequest();
        }, 2000);

        setTimeout(() => {
            immediateRequest();
        }, 4000);
    </script>
</body>
</html>